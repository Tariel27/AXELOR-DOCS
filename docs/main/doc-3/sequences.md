Пользовательские последовательности можно использовать для создания шаблонных последовательных строковых значений. Они особенно полезны для создания последовательностей для заказа на продажу, сотрудника, счета-фактуры и т. д.

Последовательности хранятся в виде `MetaSequence`записей. После добавления новых последовательностей необходимо обновить метазаписи.

Последовательность можно определить следующим образом:

    <domain-models ...>
    
      <sequence name="sale.order.seq" initial="1" increment="1" padding="5" prefix="SO"/>
    
      <entity name="Order">
        <many-to-one name="customer" ref="com.axelor.contact.db.Contact" required="true"/>
        <string name="name" sequence="sale.order.seq" />
        ...
      </entity>
    
      ...
    </domain-models>



Тег `<sequence>`имеет следующие атрибуты:



Атрибут

Описание

**`name`**

название последовательности (обязательно)

`prefix`

строка префикса (необязательно)

`suffix`

строка суффикса (необязательно)

`padding`

ширина заполнения числовой части последовательности (необязательно)

`initial`

начальное значение числовой части (по умолчанию 1)

`increment`

шаг приращения числовой части (по умолчанию 1)

Итак, для приведенного выше примера последовательности генерируются следующим образом:

SO00001
SO00002
SO00003
...
SO0000N

Поля последовательности будут автоматически назначены при сохранении новых записей. Если вы хотите получить значения последовательности в некоторых редких случаях, вы можете сделать что-то вроде этого:

    public class MyService {
    
      @Transactional
      public void doSomeThing() {
    
        Order order = new Order();
    
        // not required though
        order.setName(JpaSequence.nextValue("sale.order.seq"));
    
        ...
      }
    }

